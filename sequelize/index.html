<!DOCTYPE html>
<html lang="en-US">
<head>
	<style>
		:root {
			--c-bg: #fff;
		}

		html.dark {
			--c-bg: #1d1d1d;
		}

		html, body {
			background-color: var(--c-bg);
		}
	</style>
	<script>
		(() => {
			const { classList } = document.documentElement;
			const userMode = localStorage.getItem('guide-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				classList.toggle('dark', true);
			}

			const themes = ['blurple'];
			let colorTheme = localStorage.getItem('guide-color-theme');

			if (colorTheme !== 'default' && !themes.includes(colorTheme)) {
				colorTheme = 'default';
			}

			if (colorTheme !== 'default') classList.add(`guide-theme-${colorTheme}`);
		})();
	</script>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" href="../favicon.png"><meta name="theme-color" content="#3eaf7c"><meta name="twitter:card" content="summary"><meta property="og:title" content="Discord.js Guide"><meta property="og:description" content="Imagine a guide... that explores the many possibilities for your discord.js bot."><meta property="og:type" content="website"><meta property="og:url" content="https://discordjs.guide/"><meta property="og:locale" content="en_US"><meta property="og:image" content="/meta-image.png"><title>Storing data with Sequelize | Discord.js Guide</title><meta name="description" content="Imagine a guide... that explores the many possibilities for your discord.js bot.">
<link rel="modulepreload" href="../assets/app.554c1b80.js"><link rel="modulepreload" href="../assets/index.html.d987fc21.js"><link rel="modulepreload" href="../assets/index.html.2badb543.js">
<link rel="stylesheet" href="../assets/style.34d76a50.css">
</head>
<body>
	<div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="navbar-wrapper"><div class="navbar-links-wrapper"><div class="navbar-links-container"><span class="navbar-links-home"><a href="../index.html" class="">Discord.js Guide</a></span><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="../voice.html" class="nav-link" aria-label="Voice"><!--[--><!--]--> Voice <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://discord.js.org/#/docs/main/stable/general/welcome" rel="noopener noreferrer" target="_blank" aria-label="Documentation"><!--[--><!--]--> Documentation <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/discordjs/guide" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--></div><div class="navbar-links-container"><button class="toggle-dark-button"><svg class="icon light-icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="icon dark-icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container" class="navbar-search"></div><div class="toggle-sidebar-button"><svg viewbox="0 0 448 512" class="icon sidebar-menu-icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg><svg viewbox="0 0 24 24" class="icon sidebar-close-icon"><path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41z" fill="currentColor"></path></svg></div></div></div></div></header><div class="content-wrapper"><div class="notifications-wrapper"><div class="notifications"><!--[--><!----><!--]--></div></div><div class="sidebar-mask"></div><div class="sidebar-wrapper"><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="../voice.html" class="nav-link" aria-label="Voice"><!--[--><!--]--> Voice <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://discord.js.org/#/docs/main/stable/general/welcome" rel="noopener noreferrer" target="_blank" aria-label="Documentation"><!--[--><!--]--> Documentation <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/discordjs/guide" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><div class="sidebar-group sidebar-group-collapsed"><button class="sidebar-heading sidebar-item"> Settings <svg viewbox="0 0 24 24" class="menu-icon"><path d="M7.41 8.58L12 13.17l4.59-4.59L18 10l-6 6l-6-6l1.41-1.42z" fill="currentColor"></path></svg></button><ul style="display:none;"><li><div class="sidebar-item"><div class="theme-options"><ul class="color-theme-options"><span>Theme</span><li><button class="default-theme" title="Green theme"></button></li><li><button class="blurple-theme" title="Blurple theme"></button></li></ul></div></div></li></ul></div><!--[--><!--[--><p class="sidebar-heading sidebar-item">Home</p><ul class=""><li><!--[--><a href="../index.html" class="nav-link sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../requesting-more-content.html" class="nav-link sidebar-item" aria-label="Requesting more content"><!--[--><!--]--> Requesting more content <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../whats-new.html" class="nav-link sidebar-item" aria-label="What&#39;s new"><!--[--><!--]--> What&#39;s new <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Installations &amp; Preparations</p><ul class=""><li><!--[--><a href="../preparations/index.html" class="nav-link sidebar-item" aria-label="Installing Node.js and discord.js"><!--[--><!--]--> Installing Node.js and discord.js <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../preparations/setting-up-a-linter.html" class="nav-link sidebar-item" aria-label="Setting up a linter"><!--[--><!--]--> Setting up a linter <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../preparations/setting-up-a-bot-application.html" class="nav-link sidebar-item" aria-label="Setting up a bot application"><!--[--><!--]--> Setting up a bot application <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="https://discordjs.guide/preparations/adding-your-bot-to-servers.html" class="nav-link sidebar-item" aria-label="Adding your bot to servers"><!--[--><!--]--> Adding your bot to servers <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Creating Your Bot</p><ul class=""><li><!--[--><a href="../creating-your-bot/index.html" class="nav-link sidebar-item" aria-label="Initial files"><!--[--><!--]--> Initial files <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../creating-your-bot/creating-commands.html" class="nav-link sidebar-item" aria-label="Creating commands"><!--[--><!--]--> Creating commands <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../creating-your-bot/command-handling.html" class="nav-link sidebar-item" aria-label="Command handling"><!--[--><!--]--> Command handling <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../creating-your-bot/event-handling.html" class="nav-link sidebar-item" aria-label="Event handling"><!--[--><!--]--> Event handling <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Interactions</p><ul class=""><li><!--[--><a href="../interactions/registering-slash-commands.html" class="nav-link sidebar-item" aria-label="Registering slash commands"><!--[--><!--]--> Registering slash commands <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../interactions/replying-to-slash-commands.html" class="nav-link sidebar-item" aria-label="Replying to slash commands"><!--[--><!--]--> Replying to slash commands <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../interactions/slash-command-permissions.html" class="nav-link sidebar-item" aria-label="Slash command permissions"><!--[--><!--]--> Slash command permissions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../interactions/buttons.html" class="nav-link sidebar-item" aria-label="Buttons"><!--[--><!--]--> Buttons <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../interactions/select-menus.html" class="nav-link sidebar-item" aria-label="Select menus"><!--[--><!--]--> Select menus <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Popular Topics</p><ul class=""><li><!--[--><a href="../popular-topics/faq.html" class="nav-link sidebar-item" aria-label="Frequently asked Questions"><!--[--><!--]--> Frequently asked Questions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/threads.html" class="nav-link sidebar-item" aria-label="Threads"><!--[--><!--]--> Threads <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/embeds.html" class="nav-link sidebar-item" aria-label="Embeds"><!--[--><!--]--> Embeds <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/builders.html" class="nav-link sidebar-item" aria-label="Builders"><!--[--><!--]--> Builders <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/reactions.html" class="nav-link sidebar-item" aria-label="Reactions"><!--[--><!--]--> Reactions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/collectors.html" class="nav-link sidebar-item" aria-label="Collectors"><!--[--><!--]--> Collectors <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/permissions.html" class="nav-link sidebar-item" aria-label="Permissions"><!--[--><!--]--> Permissions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/permissions-extended.html" class="nav-link sidebar-item" aria-label="Permissions (extended)"><!--[--><!--]--> Permissions (extended) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/intents.html" class="nav-link sidebar-item" aria-label="Gateway Intents"><!--[--><!--]--> Gateway Intents <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/partials.html" class="nav-link sidebar-item" aria-label="Partial Structures"><!--[--><!--]--> Partial Structures <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/webhooks.html" class="nav-link sidebar-item" aria-label="Webhooks"><!--[--><!--]--> Webhooks <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/errors.html" class="nav-link sidebar-item" aria-label="Errors"><!--[--><!--]--> Errors <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/audit-logs.html" class="nav-link sidebar-item" aria-label="Working with Audit Logs"><!--[--><!--]--> Working with Audit Logs <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../popular-topics/canvas.html" class="nav-link sidebar-item" aria-label="Image manipulation with Canvas"><!--[--><!--]--> Image manipulation with Canvas <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Miscellaneous</p><ul class=""><li><!--[--><a href="../miscellaneous/parsing-mention-arguments.html" class="nav-link sidebar-item" aria-label="Parsing mentions"><!--[--><!--]--> Parsing mentions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../miscellaneous/useful-packages.html" class="nav-link sidebar-item" aria-label="Useful packages"><!--[--><!--]--> Useful packages <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">Databases</p><ul class=""><li><!--[--><a aria-current="page" href="index.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Storing data with Sequelize"><!--[--><!--]--> Storing data with Sequelize <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="index.html#why-use-an-orm" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Why use an ORM?"><!--[--><!--]--> Why use an ORM? <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#a-simple-tag-system" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="A simple tag system"><!--[--><!--]--> A simple tag system <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="index.html#installing-and-using-sequelize" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Installing and using Sequelize"><!--[--><!--]--> Installing and using Sequelize <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#alpha-connection-information" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="[alpha] Connection information"><!--[--><!--]--> [alpha] Connection information <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#beta-creating-the-model" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="[beta] Creating the model"><!--[--><!--]--> [beta] Creating the model <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#gamma-syncing-the-model" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="[gamma] Syncing the model"><!--[--><!--]--> [gamma] Syncing the model <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#delta-adding-a-tag" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="[delta] Adding a tag"><!--[--><!--]--> [delta] Adding a tag <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#epsilon-fetching-a-tag" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="[epsilon] Fetching a tag"><!--[--><!--]--> [epsilon] Fetching a tag <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#zeta-editing-a-tag" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="[zeta] Editing a tag"><!--[--><!--]--> [zeta] Editing a tag <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#theta-display-info-on-a-specific-tag" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="[theta] Display info on a specific tag"><!--[--><!--]--> [theta] Display info on a specific tag <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#lambda-listing-all-tags" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="[lambda] Listing all tags"><!--[--><!--]--> [lambda] Listing all tags <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="index.html#mu-deleting-a-tag" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="[mu] Deleting a tag"><!--[--><!--]--> [mu] Deleting a tag <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="index.html#resulting-code" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Resulting code"><!--[--><!--]--> Resulting code <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="currency.html" class="nav-link sidebar-item" aria-label="Making a Currency System"><!--[--><!--]--> Making a Currency System <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../keyv/index.html" class="nav-link sidebar-item" aria-label="Storing data with Keyv"><!--[--><!--]--> Storing data with Keyv <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Sharding</p><ul class=""><li><!--[--><a href="../sharding/index.html" class="nav-link sidebar-item" aria-label="Getting started"><!--[--><!--]--> Getting started <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../sharding/additional-information.html" class="nav-link sidebar-item" aria-label="Additional information"><!--[--><!--]--> Additional information <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../sharding/extended.html" class="nav-link sidebar-item" aria-label="Extended changes"><!--[--><!--]--> Extended changes <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">OAuth2</p><ul class=""><li><!--[--><a href="../oauth2/index.html" class="nav-link sidebar-item" aria-label="Getting started with OAuth2"><!--[--><!--]--> Getting started with OAuth2 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Improving Your Dev Environment</p><ul class=""><li><!--[--><a href="../improving-dev-environment/pm2.html" class="nav-link sidebar-item" aria-label="Managing your bot process with PM2"><!--[--><!--]--> Managing your bot process with PM2 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="https://discordjs.guide/improving-dev-environment/package-json-scripts.html" class="nav-link sidebar-item" aria-label="Setting up package.json scripts"><!--[--><!--]--> Setting up package.json scripts <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Additional Information</p><ul class=""><li><!--[--><a href="../additional-info/notation.html" class="nav-link sidebar-item" aria-label="Understanding notation"><!--[--><!--]--> Understanding notation <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../additional-info/es6-syntax.html" class="nav-link sidebar-item" aria-label="ES6 syntax examples"><!--[--><!--]--> ES6 syntax examples <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../additional-info/collections.html" class="nav-link sidebar-item" aria-label="Collections"><!--[--><!--]--> Collections <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../additional-info/async-await.html" class="nav-link sidebar-item" aria-label="Understanding async/await"><!--[--><!--]--> Understanding async/await <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../additional-info/rest-api.html" class="nav-link sidebar-item" aria-label="Using a REST API"><!--[--><!--]--> Using a REST API <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../additional-info/changes-in-v13.html" class="nav-link sidebar-item" aria-label="Updating from v12 to v13"><!--[--><!--]--> Updating from v12 to v13 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside></div><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="storing-data-with-sequelize" tabindex="-1"><a class="header-anchor" href="index.html#storing-data-with-sequelize" aria-hidden="true">#</a> Storing data with Sequelize</h1><p>Sequelize is an object-relational-mapper, which means you can write a query using objects and have it run on almost any other database system that Sequelize supports.</p><h3 id="why-use-an-orm" tabindex="-1"><a class="header-anchor" href="index.html#why-use-an-orm" aria-hidden="true">#</a> Why use an ORM?</h3><p>The main benefit of using an ORM like Sequelize is that it allows you to write code that virtually looks like native JavaScript. As a side benefit, an ORM will enable you to write code that can run in almost every database system. Although databases generally adhere very closely to SQL, they each have their slight nuances and differences. You can create a database-agnostic query using an ORM that works on multiple database systems.</p><h2 id="a-simple-tag-system" tabindex="-1"><a class="header-anchor" href="index.html#a-simple-tag-system" aria-hidden="true">#</a> A simple tag system</h2><p>For this tutorial, we will create a simple tag system that will allow you to add a tag, output a tag, edit a tag, show tag info, list tags, and delete a tag.<br> To begin, you should install Sequelize into your discord.js project. We will explain SQlite as the first storage engine and show how to use other databases later. Note that you will need Node 7.6 or above to utilize the <code>async/await</code> operators.</p><h3 id="installing-and-using-sequelize" tabindex="-1"><a class="header-anchor" href="index.html#installing-and-using-sequelize" aria-hidden="true">#</a> Installing and using Sequelize</h3><p>Create a new project folder and run the following:</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">npm</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">yarn</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">pnpm</button></li></ul></div><!--[--><div class="code-group-item" aria-selected="false"><!--[--><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> discord.js sequelize sqlite3
</code></pre></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> discord.js sequelize sqlite3
</code></pre></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">install</span> discord.js sequelize sqlite3
</code></pre></div><!--]--></div><!--]--></div><div class="custom-container danger"><p class="custom-container-title">DANGER</p><p>Make sure you use version 5 or later of Sequelize! Version 4, as used in this guide, will pose a security threat. You can read more about this issue on the <a href="https://github.com/sequelize/sequelize/issues/7310" target="_blank" rel="noopener noreferrer">Sequelize issue tracker<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p></div><p>After you have installed discord.js and Sequelize, you can start with the following skeleton code. The comment labels will tell you where to insert code later on.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> Sequelize <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;sequelize&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Client<span class="token punctuation">,</span> Intents <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;discord.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token punctuation">{</span> intents<span class="token operator">:</span> <span class="token punctuation">[</span>Intents<span class="token punctuation">.</span><span class="token constant">FLAGS</span><span class="token punctuation">.</span><span class="token constant">GUILDS</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// [alpha]</span>
<span class="token comment">// [beta]</span>

client<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&#39;ready&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// [gamma]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

client<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;interactionCreate&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">interaction</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>interaction<span class="token punctuation">.</span><span class="token function">isCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> <span class="token punctuation">{</span> commandName <span class="token punctuation">}</span> <span class="token operator">=</span> interaction<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>commandName <span class="token operator">===</span> <span class="token string">&#39;addtag&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// [delta]</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>commandName <span class="token operator">===</span> <span class="token string">&#39;tag&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// [epsilon]</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>commandName <span class="token operator">===</span> <span class="token string">&#39;edittag&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// [zeta]</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>commandName <span class="token operator">===</span> <span class="token string">&#39;taginfo&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// [theta]</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>commandName <span class="token operator">===</span> <span class="token string">&#39;showtags&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// [lambda]</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>commandName <span class="token operator">===</span> <span class="token string">&#39;removetag&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// [mu]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

client<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string">&#39;your-token-goes-here&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="alpha-connection-information" tabindex="-1"><a class="header-anchor" href="index.html#alpha-connection-information" aria-hidden="true">#</a> [alpha] Connection information</h3><p>The first step is to define the connection information. It should look something like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> sequelize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sequelize</span><span class="token punctuation">(</span><span class="token string">&#39;database&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;password&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	host<span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span>
	dialect<span class="token operator">:</span> <span class="token string">&#39;sqlite&#39;</span><span class="token punctuation">,</span>
	logging<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token comment">// SQLite only</span>
	storage<span class="token operator">:</span> <span class="token string">&#39;database.sqlite&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>host</code> tells Sequelize where to look for the database. For most systems, the host will be localhost, as the database usually resides with the application. If you have a remote database, however, then you can set it to that connection address. Otherwise, don&#39;t touch this unless you know what you&#39;re doing.<br><code>dialect</code> refers to the database engine you are going to use. For this tutorial, it will be sqlite.<br><code>logging</code> enables verbose output from Sequelize–useful for when you are trying to debug. You can disable it by setting it to <code>false</code>. <code>storage</code> is a sqlite-only setting because sqlite is the only database that stores all its data to a single file.</p><h3 id="beta-creating-the-model" tabindex="-1"><a class="header-anchor" href="index.html#beta-creating-the-model" aria-hidden="true">#</a> [beta] Creating the model</h3><p>In any relational database, you need to create tables to store your data. This simple tag system will use four fields. The table in the database will look something like this:</p><table><thead><tr><th>name</th><th>description</th><th>username</th><th>usage_count</th></tr></thead><tbody><tr><td>bob</td><td>is the best</td><td>bob</td><td>0</td></tr><tr><td>tableflip</td><td>(╯°□°）╯︵ ┻━┻</td><td>joe</td><td>8</td></tr></tbody></table><p>To do that in Sequelize, you define a model based on this structure, as shown below.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
 * equivalent to: CREATE TABLE tags(
 * name VARCHAR(255) UNIQUE,
 * description TEXT,
 * username VARCHAR(255),
 * usage_count  INT NOT NULL DEFAULT 0
 * );
 */</span>
<span class="token keyword">const</span> Tags <span class="token operator">=</span> sequelize<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;tags&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token punctuation">{</span>
		type<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
		unique<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	description<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">,</span>
	username<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
	usage_count<span class="token operator">:</span> <span class="token punctuation">{</span>
		type<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">,</span>
		defaultValue<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		allowNull<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>The model mirrors very closely what the database defines. There will be a table with four fields called <code>name</code>, <code>description</code>, <code>username</code>, and <code>usage_count</code>.<br><code>sequelize.define()</code> takes two parameters. <code>&#39;tags&#39;</code> are passed as the name of our table, and an object that represents the table&#39;s schema in key-value pairs. Keys in the object become the model&#39;s attributes, and the values describe the attributes.</p><p><code>type</code> refers to what kind of data this attribute should hold. The most common types are number, string, and date, but other data types are available depending on the database.<br><code>unique: true</code> will ensure that this field will never have duplicated entries. Duplicate tag names are disallowed in this database.<br><code>defaultValue</code> allows you to set a fallback value if there&#39;s no initial value during the insert.<br><code>allowNull</code> is not all that important, but this will guarantee in the database that the attribute is never unset. You could potentially set it to be a blank or empty string, but it has to be <em>something</em>.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p><code>Sequelize.STRING</code> vs. <code>Sequelize.TEXT</code>: In most database systems, the string&#39;s length is a fixed length for performance reasons. Sequelize defaults this to 255. Use STRING if your input has a max length, and use TEXT if it does not. For sqlite, there is no unbounded string type, so it will not matter which one you pick.</p></div><h3 id="gamma-syncing-the-model" tabindex="-1"><a class="header-anchor" href="index.html#gamma-syncing-the-model" aria-hidden="true">#</a> [gamma] Syncing the model</h3><p>Now that your structure is defined, you need to make sure the model exists in the database. To make sure the bot is ready and all the data you might need has arrived, place the following code into the <code>.once(&#39;ready&#39;, ...)</code> event callback.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Tags<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>The table does not get created until you <code>sync</code> it. The schema you defined before was building the model that lets Sequelize know how the data should look. For testing, you can use <code>Tags.sync({ force: true })</code> to recreate the table every time on startup. This way, you can get a blank slate each time.</p><h3 id="delta-adding-a-tag" tabindex="-1"><a class="header-anchor" href="index.html#delta-adding-a-tag" aria-hidden="true">#</a> [delta] Adding a tag</h3><p>After all this preparation, you can now write your first command! Let&#39;s start with the ability to add a tag.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> tagName <span class="token operator">=</span> interaction<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tagDescription <span class="token operator">=</span> interaction<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#39;description&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
	<span class="token comment">// equivalent to: INSERT INTO tags (name, description, username) values (?, ?, ?);</span>
	<span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		name<span class="token operator">:</span> tagName<span class="token punctuation">,</span>
		description<span class="token operator">:</span> tagDescription<span class="token punctuation">,</span>
		username<span class="token operator">:</span> interaction<span class="token punctuation">.</span>user<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Tag </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> added.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;SequelizeUniqueConstraintError&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&#39;That tag already exists.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&#39;Something went wrong with adding a tag.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><code>Tags.create()</code> uses the models that you created previously. The <code>.create()</code> method inserts some data into the model. You are going to insert a tag name, description, and the author name into the database.<br> The <code>catch (error)</code> section is necessary for the insert because it will offload checking for duplicates to the database to notify you if an attempt to create a tag that already exists occurs. The alternative is to query the database before adding data and checking if a result returns. If there are no errors or no identical tag is found, only then would you add the data. Of the two methods, it is clear that catching the error is less work for you.<br> Although <code>if (error.name === &#39;SequelizeUniqueConstraintError&#39;)</code> was mostly for doing less work, it is always good to handle your errors, especially if you know what types of errors you will receive. This error comes up if your unique constraint is violated, i.e., duplicate values are inserted.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Do not use catch for inserting new data. Only use it for gracefully handling things that go wrong in your code or logging errors.</p></div><h3 id="epsilon-fetching-a-tag" tabindex="-1"><a class="header-anchor" href="index.html#epsilon-fetching-a-tag" aria-hidden="true">#</a> [epsilon] Fetching a tag</h3><p>Next, let&#39;s fetch the inserted tag.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> tagName <span class="token operator">=</span> interaction<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// equivalent to: SELECT * FROM tags WHERE name = &#39;tagName&#39; LIMIT 1;</span>
<span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> where<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> tagName <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// equivalent to: UPDATE tags SET usage_count = usage_count + 1 WHERE name = &#39;tagName&#39;;</span>
	tag<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token string">&#39;usage_count&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;description&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not find tag: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>This is your first query. You are finally doing something with your data; yay!<br><code>.findOne()</code> is how you fetch a single row of data. The <code>where: { name: tagName }</code> makes sure you only get the row with the desired tag. Since the queries are asynchronous, you will need to use <code>await</code> to fetch it. After receiving the data, you can use <code>.get()</code> on that object to grab the data. If no data is received, then you can tell the user that the query returned no data.</p><h3 id="zeta-editing-a-tag" tabindex="-1"><a class="header-anchor" href="index.html#zeta-editing-a-tag" aria-hidden="true">#</a> [zeta] Editing a tag</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> tagName <span class="token operator">=</span> interaction<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tagDescription <span class="token operator">=</span> interaction<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#39;description&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// equivalent to: UPDATE tags (description) values (?) WHERE name=&#39;?&#39;;</span>
<span class="token keyword">const</span> affectedRows <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> description<span class="token operator">:</span> tagDescription <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> where<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> tagName <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>affectedRows <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Tag </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was edited.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not find a tag with name </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>It is possible to edit a record by using the <code>.update()</code> function. An update returns the number of rows that the <code>where</code> condition changed. Since you can only have tags with unique names, you do not have to worry about how many rows may change. Should you get that the query didn&#39;t alter any rows, you can conclude that the tag did not exist.</p><h3 id="theta-display-info-on-a-specific-tag" tabindex="-1"><a class="header-anchor" href="index.html#theta-display-info-on-a-specific-tag" aria-hidden="true">#</a> [theta] Display info on a specific tag</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> tagName <span class="token operator">=</span> interaction<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// equivalent to: SELECT * FROM tags WHERE name = &#39;tagName&#39; LIMIT 1;</span>
<span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> where<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> tagName <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was created by </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token punctuation">.</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token punctuation">.</span>createdAt<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> and has been used </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token punctuation">.</span>usage_count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not find tag: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>This section is very similar to the previous command, except you will be showing the tag metadata. <code>tag</code> contains your tag object. Notice two things: firstly, it is possible to access the object&#39;s properties without the <code>.get()</code> function. This is because the object is an instance of a Tag, which you can treat as an object and not just a row of data. Second, you can access a property that was not defined explicitly, <code>createdAt</code>. This is because Sequelize automatically adds that column to all tables. Passing another object into the model with <code>{ createdAt: false }</code> can disable this feature, but in this case, it was useful to have.</p><h3 id="lambda-listing-all-tags" tabindex="-1"><a class="header-anchor" href="index.html#lambda-listing-all-tags" aria-hidden="true">#</a> [lambda] Listing all tags</h3><p>The next command will enable you to fetch a list of all the created tags.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// equivalent to: SELECT name FROM tags;</span>
<span class="token keyword">const</span> tagList <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span> attributes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tagString <span class="token operator">=</span> tagList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;, &#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;No tags set.&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">List of tags: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagString<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Here, you can use the <code>.findAll()</code> method to grab all the tag names. Notice that instead of having <code>where</code>, the optional field, <code>attributes</code>, is set. Setting attributes to name will let you get <em>only</em> the names of tags. If you tried to access other fields, like the tag author, you would get an error. If left blank, it will fetch <em>all</em> of the associated column data. It will not affect the results returned, but from a performance perspective, you should only grab the necessary data. If no results return, <code>tagString</code> will default to &#39;No tags set&#39;.</p><h3 id="mu-deleting-a-tag" tabindex="-1"><a class="header-anchor" href="index.html#mu-deleting-a-tag" aria-hidden="true">#</a> [mu] Deleting a tag</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> tagName <span class="token operator">=</span> interaction<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// equivalent to: DELETE from tags WHERE name = ?;</span>
<span class="token keyword">const</span> rowCount <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">{</span> where<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> tagName <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rowCount<span class="token punctuation">)</span> <span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&#39;That tag did not exist.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&#39;Tag deleted.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>.destroy()</code> runs the delete operation. The operation returns a count of the number of affected rows. If it returns with a value of 0, then nothing was deleted, and that tag did not exist in the database in the first place.</p><h2 id="resulting-code" tabindex="-1"><a class="header-anchor" href="index.html#resulting-code" aria-hidden="true">#</a> Resulting code</h2><p> If you want to compare your code to the code we&#39;ve constructed so far, you can review it over on the GitHub repository <a href="https://github.com/discordjs/guide/tree/main/code-samples/" target="_blank" rel="noopener noreferrer"> here <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>. </p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/discordjs/guide/edit/main/guide/sequelize/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">10/26/2021, 2:41:19 AM</span></div><!----></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="currency.html" class="nav-link" aria-label="Making a Currency System"><!--[--><!--]--> Making a Currency System <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main></div></div><!----><!--]--></div>
	<script type="module" src="../assets/app.554c1b80.js" defer></script>
</body>
</html>
