import{r as n,o as s,c as e,a,b as t,w as o,F as i,d as p,f as r}from"./app.554c1b80.js";const c={},l=a("h1",{id:"gateway-intents",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#gateway-intents","aria-hidden":"true"},"#"),p(" Gateway Intents")],-1),u=a("p",null,[p("Gateway Intents were introduced by Discord so bot developers can choose which events their bot receives based on which data it needs to function. Intents are named groups of pre-defined WebSocket events, which the discord.js client will receive. If you omit "),a("code",null,"DIRECT_MESSAGE_TYPING"),p(", for example, you will no longer receive typing events from direct messages. If you provide no intents, discord.js will throw an error.")],-1),d=a("h2",{id:"privileged-intents",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#privileged-intents","aria-hidden":"true"},"#"),p(" Privileged Intents")],-1),h=p('Discord defines some intents as "privileged" due to the data\'s sensitive nature. At the time of writing this article, privileged intents are '),k=a("code",null,"GUILD_PRESENCES",-1),f=p(" and "),b=a("code",null,"GUILD_MEMBERS",-1),m=p(". If your bot is not verified and in less than 100 guilds, you can enable privileged gateway intents in the "),g={href:"https://discord.com/developers/applications",target:"_blank",rel:"noopener noreferrer"},y=p("Discord Developer Portal"),v=p(' under "Privileged Gateway Intents" in the "Bot" section. If your bot is already verified or is about to '),w={href:"https://support.discord.com/hc/en-us/articles/360040720412",target:"_blank",rel:"noopener noreferrer"},I=p("require verification"),S=p(", you need to request privileged intents. You can do this in your verification application or by reaching out to Discord's "),E={href:"https://dis.gd/contact",target:"_blank",rel:"noopener noreferrer"},_=p("support team"),D=p(", including why you require access to each privileged intent."),G=p("Before storming off and doing so, you should stop and carefully think about if you need these events. Discord made them opt-in so users across the platform can enjoy a higher level of "),j={href:"https://en.wikipedia.org/wiki/Privacy_by_design",target:"_blank",rel:"noopener noreferrer"},A=p("privacy"),L=p(". Presences can expose quite a bit of personal information through games and online times, for example. You might find it sufficient for your bot to have a little less information about all guild members at all times, considering you still get the command author as GuildMember from the command execution message and can fetch targets separately."),M=a("h3",{id:"error-disallowed-intents",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#error-disallowed-intents","aria-hidden":"true"},"#"),p(" Error: Disallowed Intents")],-1),x=p("Should you receive an error prefixed with "),C=a("code",null,"[DISALLOWED_INTENTS]",-1),P=p(", please review your developer dashboard settings for all privileged intents you use. Check on the "),R={href:"https://discord.com/developers/docs/topics/gateway#privileged-intents",target:"_blank",rel:"noopener noreferrer"},T=p("Discord API documentation"),B=p(" for up to date information."),N=a("h2",{id:"enabling-intents",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#enabling-intents","aria-hidden":"true"},"#"),p(" Enabling Intents")],-1),U=a("p",null,"To specify which events you want your bot to receive, first think about which events your bot needs to operate. Then select the required intents and add them to your client constructor, as shown below.",-1),q=p("All gateway intents, and the events belonging to each, are listed on the "),F={href:"https://discord.com/developers/docs/topics/gateway#list-of-intents",target:"_blank",rel:"noopener noreferrer"},W=p("Discord API documentation"),Y=p(". If you need your bot to receive messages ("),O=a("code",null,"MESSAGE_CREATE",-1),z=p(" - "),H=a("code",null,'"messageCreate"',-1),J=p(" in discord.js), you need the "),K=a("code",null,"GUILD_MESSAGES",-1),Q=p(" intent. If you want your bot to post welcome messages for new members ("),V=a("code",null,"GUILD_MEMBER_ADD",-1),X=p(" - "),Z=a("code",null,'"guildMemberAdd"',-1),$=p(" in discord.js), you need the "),nn=a("code",null,"GUILD_MEMBERS",-1),sn=p(" intent, and so on."),en=r('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Client<span class="token punctuation">,</span> Intents <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;discord.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token punctuation">{</span> intents<span class="token operator">:</span> <span class="token punctuation">[</span>Intents<span class="token punctuation">.</span><span class="token constant">FLAGS</span><span class="token punctuation">.</span><span class="token constant">GUILDS</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',1),an={class:"custom-container warning"},tn=a("p",{class:"custom-container-title"},"WARNING",-1),on=a("p",null,"Note that discord.js relies heavily on caching to provide its functionality. Some methods that seem unrelated might stop working if certain events do not arrive.",-1),pn=p("Please make sure to provide the list of gateway intents and partials you use in your Client constructor when asking for support on our "),rn={href:"https://discord.gg/djs",target:"_blank",rel:"noopener noreferrer"},cn=p("Discord server"),ln=p(" or "),un={href:"https://github.com/discordjs/discord.js",target:"_blank",rel:"noopener noreferrer"},dn=p("GitHub repository"),hn=p("."),kn=a("h2",{id:"the-intents-bitfield",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#the-intents-bitfield","aria-hidden":"true"},"#"),p(" The Intents Bitfield")],-1),fn=p("discord.js provides the utility structure "),bn=a("code",null,"Intents",-1),mn=p(" to simplify the modification of intents bitfields."),gn=r('<p>You can use the <code>.add()</code> and <code>.remove()</code> methods to add or remove flags (Intents string literals representing a certain bit) and modify the bitfield. You can provide single flags as well as an array or bitfield. To use a set of intents as a template you can pass it to the constructor. Note that the empty constructor <code>new Intents()</code> creates an empty Intents instance, representing no intents or the bitfield <code>0</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Client<span class="token punctuation">,</span> Intents <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;discord.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> myIntents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmyIntents<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Intents<span class="token punctuation">.</span><span class="token constant">FLAGS</span><span class="token punctuation">.</span><span class="token constant">GUILD_PRESENCES</span><span class="token punctuation">,</span> Intents<span class="token punctuation">.</span><span class="token constant">FLAGS</span><span class="token punctuation">.</span><span class="token constant">GUILD_MEMBERS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token punctuation">{</span> intents<span class="token operator">:</span> myIntents <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// other examples:</span>\n\n<span class="token keyword">const</span> otherIntents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intents</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Intents<span class="token punctuation">.</span><span class="token constant">FLAGS</span><span class="token punctuation">.</span><span class="token constant">GUILDS</span><span class="token punctuation">,</span> Intents<span class="token punctuation">.</span><span class="token constant">FLAGS</span><span class="token punctuation">.</span><span class="token constant">DIRECT_MESSAGES</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\notherIntents<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Intents<span class="token punctuation">.</span><span class="token constant">FLAGS</span><span class="token punctuation">.</span><span class="token constant">DIRECT_MESSAGES</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> otherIntents2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intents</span><span class="token punctuation">(</span><span class="token number">32509</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\notherIntents2<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>If you want to view the built flags you can utilize the <code>.toArray()</code>, <code>.serialize()</code> methods. The first returns an array of flags represented in this bitfield, the second an object mapping all possible flag values to a boolean, based on their representation in this bitfield.</p><h2 id="more-on-bitfields" tabindex="-1"><a class="header-anchor" href="#more-on-bitfields" aria-hidden="true">#</a> More on Bitfields</h2>',4),yn=p("Discord Intents and Permissions are stored in a 53-bit integer and calculated using bitwise operations. If you want to dive deeper into what's happening behind the curtains, check the "),vn={href:"https://en.wikipedia.org/wiki/Bit_field",target:"_blank",rel:"noopener noreferrer"},wn=p("Wikipedia"),In=p(" and "),Sn={href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators",target:"_blank",rel:"noopener noreferrer"},En=p("MDN"),_n=p(" articles on the topic."),Dn=a("p",null,[p("In discord.js, Permissions and Intents bitfields are represented as either the decimal value of said bit field or its referenced flags. Every position in a permissions bitfield represents one of these flags and its state (either referenced "),a("code",null,"1"),p(" or not referenced "),a("code",null,"0"),p(").")],-1);c.render=function(p,r){const c=n("OutboundLink"),Gn=n("docs-link");return s(),e(i,null,[l,u,d,a("p",null,[h,k,f,b,m,a("a",g,[y,t(c)]),v,a("a",w,[I,t(c)]),S,a("a",E,[_,t(c)]),D]),a("p",null,[G,a("a",j,[A,t(c)]),L]),M,a("p",null,[x,C,P,a("a",R,[T,t(c)]),B]),N,U,a("p",null,[q,a("a",F,[W,t(c)]),Y,O,z,H,J,K,Q,V,X,Z,$,nn,sn]),en,a("div",an,[tn,on,a("p",null,[pn,a("a",rn,[cn,t(c)]),ln,a("a",un,[dn,t(c)]),hn])]),kn,a("p",null,[fn,t(Gn,{path:"class/Intents"},{default:o((()=>[bn])),_:1}),mn]),gn,a("p",null,[yn,a("a",vn,[wn,t(c)]),In,a("a",Sn,[En,t(c)]),_n]),Dn],64)};export{c as default};
