<!DOCTYPE html>
<html lang="en-US">
<head>
	<style>
		:root {
			--c-bg: #fff;
		}

		html.dark {
			--c-bg: #1d1d1d;
		}

		html, body {
			background-color: var(--c-bg);
		}
	</style>
	<script>
		(() => {
			const { classList } = document.documentElement;
			const userMode = localStorage.getItem('guide-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				classList.toggle('dark', true);
			}

			const themes = ['blurple'];
			let colorTheme = localStorage.getItem('guide-color-theme');

			if (colorTheme !== 'default' && !themes.includes(colorTheme)) {
				colorTheme = 'default';
			}

			if (colorTheme !== 'default') classList.add(`guide-theme-${colorTheme}`);
		})();
	</script>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" href="../favicon.png"><meta name="theme-color" content="#3eaf7c"><meta name="twitter:card" content="summary"><meta property="og:title" content="Discord.js Guide"><meta property="og:description" content="Imagine a guide... that explores the many possibilities for your discord.js bot."><meta property="og:type" content="website"><meta property="og:url" content="https://discordjs.guide/"><meta property="og:locale" content="en_US"><meta property="og:image" content="/meta-image.png"><title>Audio Player | Discord.js Guide</title><meta name="description" content="Imagine a guide... that explores the many possibilities for your discord.js bot.">
<link rel="modulepreload" href="../assets/app.554c1b80.js"><link rel="modulepreload" href="../assets/audio-player.html.123c37e5.js"><link rel="modulepreload" href="../assets/audio-player.html.d9a3ec44.js">
<link rel="stylesheet" href="../assets/style.34d76a50.css">
</head>
<body>
	<div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="navbar-wrapper"><div class="navbar-links-wrapper"><div class="navbar-links-container"><span class="navbar-links-home"><a href="../index.html" class="">Discord.js Guide</a></span><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="../voice.html" class="nav-link router-link-active" aria-label="Voice"><!--[--><!--]--> Voice <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://discord.js.org/#/docs/main/stable/general/welcome" rel="noopener noreferrer" target="_blank" aria-label="Documentation"><!--[--><!--]--> Documentation <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/discordjs/guide" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--></div><div class="navbar-links-container"><button class="toggle-dark-button"><svg class="icon light-icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="icon dark-icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container" class="navbar-search"></div><div class="toggle-sidebar-button"><svg viewbox="0 0 448 512" class="icon sidebar-menu-icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg><svg viewbox="0 0 24 24" class="icon sidebar-close-icon"><path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41z" fill="currentColor"></path></svg></div></div></div></div></header><div class="content-wrapper"><div class="notifications-wrapper"><div class="notifications"><!--[--><!----><!--]--></div></div><div class="sidebar-mask"></div><div class="sidebar-wrapper"><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="../voice.html" class="nav-link router-link-active" aria-label="Voice"><!--[--><!--]--> Voice <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://discord.js.org/#/docs/main/stable/general/welcome" rel="noopener noreferrer" target="_blank" aria-label="Documentation"><!--[--><!--]--> Documentation <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/discordjs/guide" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><div class="sidebar-group sidebar-group-collapsed"><button class="sidebar-heading sidebar-item"> Settings <svg viewbox="0 0 24 24" class="menu-icon"><path d="M7.41 8.58L12 13.17l4.59-4.59L18 10l-6 6l-6-6l1.41-1.42z" fill="currentColor"></path></svg></button><ul style="display:none;"><li><div class="sidebar-item"><div class="theme-options"><ul class="color-theme-options"><span>Theme</span><li><button class="default-theme" title="Green theme"></button></li><li><button class="blurple-theme" title="Blurple theme"></button></li></ul></div></div></li></ul></div><!--[--><!--[--><p class="sidebar-heading sidebar-item">Home</p><ul class=""><li><!--[--><a href="../index.html" class="nav-link sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../requesting-more-content.html" class="nav-link sidebar-item" aria-label="Requesting more content"><!--[--><!--]--> Requesting more content <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="../whats-new.html" class="nav-link sidebar-item" aria-label="What&#39;s new"><!--[--><!--]--> What&#39;s new <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Getting Started</p><ul class=""><li><!--[--><a href="../voice.html" class="nav-link router-link-active sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">Library</p><ul class=""><li><!--[--><a href="/djsgc/voice/life-cycles.html" class="nav-link sidebar-item" aria-label="Life cycles"><!--[--><!--]--> Life cycles <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/djsgc/voice-connections.html" class="nav-link sidebar-item" aria-label="Voice Connections"><!--[--><!--]--> Voice Connections <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Audio Player"><!--[--><!--]--> Audio Player <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html#cheat-sheet" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Cheat sheet"><!--[--><!--]--> Cheat sheet <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html#creation" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Creation"><!--[--><!--]--> Creation <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html#deletion" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Deletion"><!--[--><!--]--> Deletion <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html#playing-audio" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Playing audio"><!--[--><!--]--> Playing audio <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html#pausing-unpausing" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Pausing/unpausing"><!--[--><!--]--> Pausing/unpausing <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html#life-cycle" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Life cycle"><!--[--><!--]--> Life cycle <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html#handling-errors" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Handling errors"><!--[--><!--]--> Handling errors <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html#taking-action-within-the-error-handler" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Taking action within the error handler"><!--[--><!--]--> Taking action within the error handler <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/djsgc/voice/audio-player.html#taking-action-within-the-idle-state" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Taking action within the Idle state"><!--[--><!--]--> Taking action within the Idle state <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/djsgc/voice/audio-resources.html" class="nav-link sidebar-item" aria-label="Audio Resources"><!--[--><!--]--> Audio Resources <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside></div><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="audio-player" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#audio-player" aria-hidden="true">#</a> Audio Player</h1><p>Audio players can be used to play audio across voice connections. A single audio player can play the same audio over multiple voice connections.</p><h2 id="cheat-sheet" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#cheat-sheet" aria-hidden="true">#</a> Cheat sheet</h2><h3 id="creation" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#creation" aria-hidden="true">#</a> Creation</h3><p>Creating an audio player is simple:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> createAudioPlayer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@discordjs/voice&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> player <span class="token operator">=</span> <span class="token function">createAudioPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>You can also customize the behaviors of an audio player. For example, the default behavior is to pause when there are no active subscribers for an audio player. This behavior can be configured to either pause, stop, or just continue playing through the stream:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> createAudioPlayer<span class="token punctuation">,</span> NoSubscriberBehavior <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@discordjs/voice&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> player <span class="token operator">=</span> <span class="token function">createAudioPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	behaviors<span class="token operator">:</span> <span class="token punctuation">{</span>
		noSubscriber<span class="token operator">:</span> NoSubscriberBehavior<span class="token punctuation">.</span>Pause<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="deletion" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#deletion" aria-hidden="true">#</a> Deletion</h3><p>If you no longer require an audio player, you can <code>stop()</code> it and then remove references to it so that it gets garbage collected.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>player<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="playing-audio" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#playing-audio" aria-hidden="true">#</a> Playing audio</h3><p>You can create <a href="/djsgc/voice/audio-resources.html" class="">audio resources</a> and then play them on an audio player.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> resource <span class="token operator">=</span> <span class="token function">createAudioResource</span><span class="token punctuation">(</span><span class="token string">&#39;/home/user/voice/track.mp3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Play &quot;track.mp3&quot; across two voice connections</span>
connection1<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
connection2<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p><strong>Audio players can play one audio resource at most.</strong> If you try to play another audio resource while one is already playing on the same player, the existing one is destroyed and replaced with the new one.</p></div><h3 id="pausing-unpausing" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#pausing-unpausing" aria-hidden="true">#</a> Pausing/unpausing</h3><p>You can call the <code>pause()</code> and <code>unpause()</code> methods. While the audio player is paused, no audio will be played. When it is resumed, it will continue where it left off.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>player<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Unpause after 5 seconds</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> player<span class="token punctuation">.</span><span class="token function">unpause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5_000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="life-cycle" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#life-cycle" aria-hidden="true">#</a> Life cycle</h2><p>Voice connections have their own life cycle, with five distinct states. You can follow the methods discussed in the <a href="/djsgc/voice/life-cycles.html" class="">life cycles</a> section to subscribe to changes to voice connections.</p><ul><li><p><strong>Idle</strong> - the initial state of an audio player. The audio player will be in this state when there is no audio resource for it to play.</p></li><li><p><strong>Buffering</strong> - the state an audio player will be in while it is waiting for an audio resource to become playable. The audio player may transition from this state to either the <code>Playing</code> state (success) or the <code>Idle</code> state (failure).</p></li><li><p><strong>Playing</strong> - the state a voice connection enters when it is actively playing an audio resource. When the audio resource comes to an end, the audio player will transition to the Idle state.</p></li><li><p><strong>AutoPaused</strong> - the state a voice connection will enter when the player has paused itself because there are no active voice connections to play to. This is only possible with the <code>noSubscriber</code> behavior set to <code>Pause</code>. It will automatically transition back to <code>Playing</code> once at least one connection becomes available again.</p></li><li><p><strong>Paused</strong> - the state a voice connection enters when it is paused by the user.</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> AudioPlayerStatus <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@discordjs/voice&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

player<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>AudioPlayerStatus<span class="token punctuation">.</span>Playing<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;The audio player has started playing!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="handling-errors" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#handling-errors" aria-hidden="true">#</a> Handling errors</h2><p>When an audio player is given an audio resource to play, it will propagate errors from the audio resource for you to handle.</p><p>In the error handler, you can choose to either play a new audio resource or stop playback. If you take no action, the audio player will stop itself and revert to the <code>Idle</code> state.</p><p>Additionally, the error object will also contain a <code>resource</code> property that helps you to figure out which audio resource created the error.</p><p>Two different examples of how you may handle errors are shown below.</p><h3 id="taking-action-within-the-error-handler" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#taking-action-within-the-error-handler" aria-hidden="true">#</a> Taking action within the error handler</h3><p>In this example, the audio player will only move on to playing the next audio resource if an error has occurred. If playback ends gracefully, nothing will happen. This example avoids a transition into the Idle state.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> createAudioResource <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@discordjs/voice&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> resource <span class="token operator">=</span> <span class="token function">createAudioResource</span><span class="token punctuation">(</span><span class="token string">&#39;/home/user/voice/music.mp3&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	metadata<span class="token operator">:</span> <span class="token punctuation">{</span>
		title<span class="token operator">:</span> <span class="token string">&#39;A good song!&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>

player<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> with resource </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>resource<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token function">getNextResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="taking-action-within-the-idle-state" tabindex="-1"><a class="header-anchor" href="/djsgc/voice/audio-player.html#taking-action-within-the-idle-state" aria-hidden="true">#</a> Taking action within the <code>Idle</code> state</h3><p>In this example, the error event is used only for logging purposes. The audio player will naturally transition into the <code>Idle</code> state, and then another resource is played. This has the advantage of working with streams that come to an end gracefully, and those that are interrupted by errors.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> createAudioResource <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@discordjs/voice&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> resource <span class="token operator">=</span> <span class="token function">createAudioResource</span><span class="token punctuation">(</span><span class="token string">&#39;/home/user/voice/music.mp3&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	metadata<span class="token operator">:</span> <span class="token punctuation">{</span>
		title<span class="token operator">:</span> <span class="token string">&#39;A good song!&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>

player<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

player<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>AudioPlayerStatus<span class="token punctuation">.</span>Idle<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token function">getNextResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/discordjs/guide/edit/main/guide/voice/audio-player.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">10/20/2021, 10:52:59 AM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/djsgc/voice-connections.html" class="nav-link" aria-label="Voice Connections"><!--[--><!--]--> Voice Connections <!--[--><!--]--></a></span><span class="next"><a href="/djsgc/voice/audio-resources.html" class="nav-link" aria-label="Audio Resources"><!--[--><!--]--> Audio Resources <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main></div></div><!----><!--]--></div>
	<script type="module" src="../assets/app.554c1b80.js" defer></script>
</body>
</html>
